# APEX API Auditor: Gap Analysis & Technical Roadmaps

Analysis of current features vs. the needs of professional API Security Analysts and Pen-Testers.

## ðŸ“Š Current State
- âœ… Automated URL scanning & detection (Regex-based).
- âœ… Local AI-powered triage and audit insights (Phi 3.5).
- âœ… Secret scanning and PII masking.
- âœ… JSON tree visualization and JWT decoding.
- âœ… Automated model setup on startup.
- âœ… Asset scan history and history UI.
- âœ… Batch Markdown/CSV reporting.

## ðŸ•³ï¸ Identified Gaps: Detector System
- **Contextual Blindness**: Detectors currently trigger on static patterns. They lack cross-request context (e.g., identifying a token leak in one request used in another).
- **False Positive Tuning**: No mechanism for analysts to "train" the detector that specific regex matches are false positives for a given domain.
- **Logic Flaw Detection**: Current signatures miss sophisticated logic vulnerabilities like price manipulation or race conditions.
- **Scanner Customization**: No plugin/scripting support (Python/WASM) for adding proprietary scan logic on-the-fly.

## ðŸ•³ï¸ Identified Gaps: Inspection (Inspector) Tab
- **Active Manipulation (Interception)**: No "Repeater" functionality to edit a request and see the new response instantly.
- **Response Diffing**: History tab tracks events but doesn't provide a side-by-side diff of response body/headers between scan iterations.
- **JWT Forge/Edit**: Can decode JWTs but cannot edit claims and re-sign tokens (even with a known key) within the UI.
- **Advanced JSON Filtering**: No ability to filter JSON trees by value type or schema-specific keys (e.g., "Find all keys with 'null' values").

---

## ðŸš€ Future Roadmap

### Phase 1: Interception & Replay
Integrate a local proxy listener and a "Replay" tab in the Inspector to allow on-the-fly tampering.

### Phase 2: Behavioral AI
Leverage the LLM to analyze *sequences* of requests for business logic flaws rather than static pattern matching.
See detailed plan: [LLM Sequence Analysis Plan](docs/llm_sequence_analysis_plan.md)

### Phase 3: Collaborative Intelligence
Cloud-sync of findings and "Threat Intel" sharing across team members.

---

## ðŸ› ï¸ Technical Debt & Efficiency
- **Monolithic [App.tsx](file:///c:/dev/apexapi/src/App.tsx)**: The main component is over 1700 lines, handling too much state (routing, data fetching, UI layout). Needs splitting.
- **Scattered Types**: Type definitions are defined in-place or scattered. Need centralization in `src/types`.
- **Backend Modularity**: `lib.rs` contains mixed logic for logging, scanning, and commands. Should be refactored into `commands.rs`, `logging.rs`, etc.
- **Hardcoded Styles**: Many inline styles in `App.tsx` and components should be moved to CSS classes or Tailwind (if adopted).

## ðŸš€ Future Roadmap

### Phase 1: Code & Performance Audit (Immediate)
- **Refactor `App.tsx`**: Extract `AssetTable`, `Sidebar`, `Header` into dedicated components.
- **Type Safety**: Centralize all interfaces (Asset, Findings, Folder) into `src/types/index.ts`.
- **Backend Cleanup**: Organize `src-tauri/src` into a clean module structure.

### Phase 2: Interception & Replay
Integrate a local proxy listener and a "Replay" tab in the Inspector to allow on-the-fly tampering.

### Phase 3: Advanced Detection
- **Shadow API 2.0**: Re-implement OpenAPI import with a dedicated UI and robust diffing.
- **Sensitive Data 2.0**: Port Gitleaks regexes to `detectors.rs` for high-fidelity secret scanning.

### Phase 4: Collaborative Intelligence
Cloud-sync of findings and "Threat Intel" sharing across team members.

---

## ðŸ› ï¸ Efficiency Score: 88% -> 92% (Target)
The tool is a powerhouse for rapid discovery. Addressing technical debt now will ensure scalability for Phase 2 & 3.
